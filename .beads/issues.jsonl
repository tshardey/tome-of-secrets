{"id":"tome-of-secrets-05u","title":"Add new genres (Literary Fiction, Genre Fiction, Cozy)","description":"Add to genreQuests.json and regenerate data","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:20.318464619Z","created_by":"tshardey","updated_at":"2026-02-16T06:45:37.767570896Z","closed_at":"2026-02-16T06:45:37.767570896Z","close_reason":"Done: new genres in genreQuests.json; unlimited genre selection + Select All","dependencies":[{"issue_id":"tome-of-secrets-05u","depends_on_id":"tome-of-secrets-m5v","type":"blocks","created_at":"2026-02-02T23:09:31.634352098Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-0en","title":"Test: Filter atmospheric buff items from dropdown","description":"Test that atmospheric buff sources are filtered from bonus cards","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:13:10.743992994Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.418957998Z","closed_at":"2026-02-02T23:33:00.418957998Z","close_reason":"Closed"}
{"id":"tome-of-secrets-0gr","title":"The Gallery - Book covers via OpenLibrary API","description":"ISBN input, cover fetching, grid display for completed books","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:20.960440817Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:19.175480046Z","closed_at":"2026-02-23T05:28:19.175480046Z","close_reason":"Gallery feature implemented: Tome Cards with 3D flip animation, BookMetadataService (OpenLibrary primary, Google Books backfill), schema v4 migration, quest edit drawer integration with live search, cover/pageCount display. Bug fixes: overflow flattening 3D, API rate limiting.","dependencies":[{"issue_id":"tome-of-secrets-0gr","depends_on_id":"tome-of-secrets-2xj","type":"blocks","created_at":"2026-02-02T23:09:32.201558203Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-0gr","depends_on_id":"tome-of-secrets-tj0","type":"blocks","created_at":"2026-02-02T23:09:34.990027826Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-0gr","depends_on_id":"tome-of-secrets-crv","type":"blocks","created_at":"2026-02-02T23:09:35.306084277Z","created_by":"tshardey"}],"comments":[{"id":2,"issue_id":"tome-of-secrets-0gr","author":"tshardey","text":"Reopened at user request","created_at":"2026-02-19T05:27:08Z"},{"id":3,"issue_id":"tome-of-secrets-0gr","author":"tshardey","text":"Updated scope per GDD (project-docs/project-docs_GDD-GRIMOIRE-GALLERY.md): Upgrade Archive tab into Grimoire Gallery with interactive flipping Tome Cards. Dual API integration (Google Books primary, OpenLibrary fallback) for automatic cover + page count fetching. Cards show book cover on front, structured stat block on back. Six sub-tasks created covering: schema migration, API service, quest form integration, CSS animation, grid layout refactor, and stat block layout.","created_at":"2026-02-23T02:20:16Z"}]}
{"id":"tome-of-secrets-14f","title":"Unified Book Selector Modal: Assign a Book UI, refactor QuestController to use it","description":"Add 'Assign a Book' modal (character-sheet.html or dynamic): tab to search characterState.books, tab to add new book manually. In QuestController populateQuestEditDrawer() and handleAddQuest(), replace raw Title/Author/Cover inputs with a 'Link Book' button opening this modal. Plan: .cursor/plans/book-exchange-plan_578ba89c.plan.md §3.","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-24T00:02:16.020051307Z","created_by":"tshardey","updated_at":"2026-02-24T00:02:16.020051307Z","dependencies":[{"issue_id":"tome-of-secrets-14f","depends_on_id":"tome-of-secrets-xph","type":"blocks","created_at":"2026-02-24T00:02:24.836221712Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-1l3","title":"Fix: Add saveState() call in quest completion rollback","description":"Ensure state is persisted when quest completion is blocked due to missing book title","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:39:28.630918561Z","created_by":"tshardey","updated_at":"2026-02-02T23:39:30.512395829Z","closed_at":"2026-02-02T23:39:30.512395829Z","close_reason":"Closed"}
{"id":"tome-of-secrets-1n7","title":"Phase 3: Dungeon \u0026 Card Mechanics","description":"Dungeon rewards and card draw improvements","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:14.078503854Z","created_by":"tshardey","updated_at":"2026-02-15T02:11:35.51434312Z","closed_at":"2026-02-15T02:11:35.51434312Z","close_reason":"Closed"}
{"id":"tome-of-secrets-1su","title":"Implement multiple card draw with selection","description":"Support drawing N cards and selecting which to keep (for reroll abilities)","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:19.015579527Z","created_by":"tshardey","updated_at":"2026-02-15T02:11:35.677704686Z","closed_at":"2026-02-15T02:11:35.677704686Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-1su","depends_on_id":"tome-of-secrets-1n7","type":"blocks","created_at":"2026-02-02T23:09:30.535172415Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-1vs","title":"Gallery: Tome Card CSS 3D flip animation","description":"Create Tome Card CSS classes (in a new library.css or existing stylesheet). (1) Fixed card dimensions: 250px x 375px (trade paperback / tarot card ratio). (2) Classes: .tome-card (perspective container), .tome-card-inner (transition target), .tome-card-front, .tome-card-back. (3) Hover interaction: .tome-card:hover .tome-card-inner triggers 180-degree rotateY. (4) backface-visibility: hidden on both faces. (5) Smooth transition timing (~0.6s ease). (6) Fallback 'leather tome' styling for cards with no cover image — dark textured background with the book title in gold/foil text. (7) Responsive considerations for mobile (tap instead of hover). (8) Match existing Dark Academia theme.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T02:17:07.735359809Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:25.310327052Z","closed_at":"2026-02-23T05:28:25.310327052Z","close_reason":"Tome Card CSS 3D flip: perspective, preserve-3d, click-to-flip, backface-visibility, transitions, webkit prefixes. Fixed overflow flattening.","dependencies":[{"issue_id":"tome-of-secrets-1vs","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T02:17:26.846184938Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-2sq","title":"RoomVisualizationService.js - sticker resolution logic","description":"Create assets/js/services/RoomVisualizationService.js with getActiveStickers(characterState, themeId) and getStickerForBuff(buffName, themeId) methods. Maps buff names to sticker configs via stickerSlug lookup. Future extensibility for getItemStickers().","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T01:07:33.614378997Z","created_by":"tshardey","updated_at":"2026-02-16T03:04:39.24203204Z","closed_at":"2026-02-16T03:04:39.24203204Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-2sq","depends_on_id":"tome-of-secrets-cqk","type":"blocks","created_at":"2026-02-16T01:07:46.444736327Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-2xj","title":"Phase 6: The Grimoire Features","description":"Major new reading journal features","design":"Exchange Program (child 3e9) is specified by the Book-First Paradigm plan: .cursor/plans/book-exchange-plan_578ba89c.plan.md. Implement Exchange after Book-First foundation (schema v5, BookController, Unified Book Selector, Library view).","status":"open","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:15.291875978Z","created_by":"tshardey","updated_at":"2026-02-23T23:56:25.398346824Z","dependencies":[{"issue_id":"tome-of-secrets-2xj","depends_on_id":"tome-of-secrets-40o","type":"blocks","created_at":"2026-02-02T23:09:34.831721464Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-2xj","depends_on_id":"tome-of-secrets-kw4","type":"blocks","created_at":"2026-02-23T04:45:03.681376935Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-2xj","depends_on_id":"tome-of-secrets-9gp","type":"blocks","created_at":"2026-02-23T04:58:36.70245575Z","created_by":"tshardey"}],"comments":[{"id":1,"issue_id":"tome-of-secrets-2xj","author":"tshardey","text":"Reopened at user request","created_at":"2026-02-19T05:27:08Z"}]}
{"id":"tome-of-secrets-3e9","title":"The Exchange Program - External challenges integration","description":"Implement the Exchange Program per the Book-First Paradigm plan (.cursor/plans/book-exchange-plan_578ba89c.plan.md).\n\nScope (plan phases 5–7):\n• State \u0026 service: ExchangeController + stateAdapter methods for characterState.exchangeProgram — Curriculums, nested Categories, and Prompts (JSON schema in design doc).\n• Exchange Builder UI: Add Exchange tab/section; form builder for defining Curriculums, Categories, Prompts; \"Link Book\" on each prompt reusing the Unified Book Selector modal.\n• Synergy rewards: +5 Paper Scraps when a book is linked to an Exchange prompt; +10 Ink Drops Synergy Bonus when a book has both tomeQuestId and at least one exchangePromptId (cross-pollination).\n\nDepends on Book-First work: global books state, BookController, Unified Book Selector (see plan phases 1–4).","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:21.56303532Z","created_by":"tshardey","updated_at":"2026-02-23T23:56:11.254003659Z","dependencies":[{"issue_id":"tome-of-secrets-3e9","depends_on_id":"tome-of-secrets-2xj","type":"blocks","created_at":"2026-02-02T23:09:32.684161458Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-3e9","depends_on_id":"tome-of-secrets-tj0","type":"blocks","created_at":"2026-02-02T23:09:35.150277769Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-3e9","depends_on_id":"tome-of-secrets-qfm","type":"blocks","created_at":"2026-02-24T00:02:25.609834492Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-3h3","title":"Filter atmospheric buff items from monthly quest dropdown (#71)","description":"Exclude items/familiars that provide atmospheric modifiers","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:17.190509363Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.344748037Z","closed_at":"2026-02-02T23:33:00.344748037Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-3h3","depends_on_id":"tome-of-secrets-ch6","type":"blocks","created_at":"2026-02-02T23:09:28.955219891Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-40o","title":"Phase 2: Quest System Enhancements","description":"Core quest tracking improvements","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:13.729506629Z","created_by":"tshardey","updated_at":"2026-02-08T20:54:14.281265371Z","closed_at":"2026-02-08T20:54:14.281265371Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-40o","depends_on_id":"tome-of-secrets-ch6","type":"blocks","created_at":"2026-02-02T23:09:34.673007411Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-4qt","title":"Gallery: Quest edit form - live book search","description":"Integrate BookMetadataService into the Quest Edit drawer (QuestController.js). (1) Add a search input/trigger in the edit form that fires debounced queries as the user types in the Book Name field. (2) Display search results as a selectable dropdown/list with cover thumbnails, titles, and authors. (3) On selection, auto-populate: title, author, coverUrl, pageCountRaw into the form. (4) Calculate pageCountEffective by running the raw count through active Keeper loadout modifiers (e.g., items that grant bonuses for books over N pages). (5) Allow manual override of all auto-populated fields before saving. (6) Store fetched metadata on the quest object when saved.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T02:17:02.968506915Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:27.218729822Z","closed_at":"2026-02-23T05:28:27.218729822Z","close_reason":"Quest edit drawer: live book search with debounce, search results with thumbnails/page counts, applyBookToForm, Look up book button for legacy quests.","dependencies":[{"issue_id":"tome-of-secrets-4qt","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T02:17:26.467146446Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-4qt","depends_on_id":"tome-of-secrets-s7l","type":"blocks","created_at":"2026-02-23T02:17:36.25532682Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-4qt","depends_on_id":"tome-of-secrets-cof","type":"blocks","created_at":"2026-02-23T02:17:36.643229192Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-5aw","title":"Visual overhaul of atmospheric buffs UI","description":"Card-based layout with images and improved visual hierarchy","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:19.446709336Z","created_by":"tshardey","updated_at":"2026-02-16T05:40:04.861257723Z","closed_at":"2026-02-16T05:40:04.861257723Z","close_reason":"Done as part of Phase 4","dependencies":[{"issue_id":"tome-of-secrets-5aw","depends_on_id":"tome-of-secrets-hdz","type":"blocks","created_at":"2026-02-02T23:09:30.925792759Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-6bu","title":"Fix: Prevent completing quests without book titles","description":"Add validation to prevent completing quests without book titles to ensure they count towards monthly totals","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:18:40.824416961Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.3751216Z","closed_at":"2026-02-02T23:33:00.3751216Z","close_reason":"Closed"}
{"id":"tome-of-secrets-6tk","title":"Room visualization tests","description":"Add tests for RoomVisualizationService: sticker resolution, active sticker calculation, buff-to-sticker slug mapping. Edge cases: no active buffs, Grove Tender always-active buff.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T01:07:39.810265931Z","created_by":"tshardey","updated_at":"2026-02-16T03:04:39.299588412Z","closed_at":"2026-02-16T03:04:39.299588412Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-6tk","depends_on_id":"tome-of-secrets-2sq","type":"blocks","created_at":"2026-02-16T01:07:48.407104957Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-71z","title":"Add atmospheric rewards to buff table","description":"Include Garden Gnome, Gilded Painting, etc. in standard buff table","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:19.647129318Z","created_by":"tshardey","updated_at":"2026-02-16T05:40:04.68840031Z","closed_at":"2026-02-16T05:40:04.68840031Z","close_reason":"Done as part of Phase 4","dependencies":[{"issue_id":"tome-of-secrets-71z","depends_on_id":"tome-of-secrets-hdz","type":"blocks","created_at":"2026-02-02T23:09:31.082388975Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-7yr","title":"Remove Selected Genres section from Character page","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-27T06:13:35.518603762Z","created_by":"tshardey","updated_at":"2026-02-27T06:18:21.424674824Z","closed_at":"2026-02-27T06:18:21.424674824Z","close_reason":"Removed legacy Selected Genres panel from Character tab; functionality now lives in Quests tab"}
{"id":"tome-of-secrets-9gp","title":"Archive: flip cards for dungeon + poster/cover toggle","description":"Make dungeon room/encounter archive cards and side quests use the Tome flip-card UI consistently. Add a user toggle (Poster vs Cover) defaulting to Poster so coverUrl doesn't always replace quest poster art. Handle square encounter art/cover rendering gracefully.","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T04:58:33.87899932Z","created_by":"tshardey","updated_at":"2026-02-23T05:02:19.072502793Z","closed_at":"2026-02-23T05:02:19.072502793Z","close_reason":"Converted dungeon room/encounter archive cards to Tome flip cards, added Poster/Cover face toggle (persisted), and handled square encounter rendering with contain+square card variant. Updated Jest test to match new DOM; suite passing."}
{"id":"tome-of-secrets-9j0","title":"Fix: Cap booksCompleted at 10 in shelf initialization","description":"Fix shelf color mismatch when booksCompleted exceeds 10","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:39:28.420498017Z","created_by":"tshardey","updated_at":"2026-02-02T23:39:30.497632393Z","closed_at":"2026-02-02T23:39:30.497632393Z","close_reason":"Closed"}
{"id":"tome-of-secrets-9x0","title":"The Hourglass - Reading sprint timer with Focus Points","description":"Timer UI, focus point economy, buff purchasing system","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:21.161470425Z","created_by":"tshardey","updated_at":"2026-02-02T23:09:21.161470425Z","dependencies":[{"issue_id":"tome-of-secrets-9x0","depends_on_id":"tome-of-secrets-2xj","type":"blocks","created_at":"2026-02-02T23:09:32.362191574Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-9yu","title":"Remove dice limits for genre selection","description":"Allow unlimited selection and add Select All button","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:20.525071323Z","created_by":"tshardey","updated_at":"2026-02-16T06:45:37.948683727Z","closed_at":"2026-02-16T06:45:37.948683727Z","close_reason":"Done: new genres in genreQuests.json; unlimited genre selection + Select All","dependencies":[{"issue_id":"tome-of-secrets-9yu","depends_on_id":"tome-of-secrets-m5v","type":"blocks","created_at":"2026-02-02T23:09:31.792666711Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-9zp","title":"The Archive - Series tracker with completion rewards","description":"Series CRUD, book tagging, souvenir item generation","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:21.363203496Z","created_by":"tshardey","updated_at":"2026-02-02T23:09:21.363203496Z","dependencies":[{"issue_id":"tome-of-secrets-9zp","depends_on_id":"tome-of-secrets-2xj","type":"blocks","created_at":"2026-02-02T23:09:32.524507249Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-a89","title":"Fix bookshelf initialization bug (#69)","description":"Sync input value from completedBooksSet on page load","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:16.988967399Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.329355867Z","closed_at":"2026-02-02T23:33:00.329355867Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-a89","depends_on_id":"tome-of-secrets-ch6","type":"blocks","created_at":"2026-02-02T23:09:28.795822585Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-aqh","title":"Add quest restore functionality","description":"Move quests from discarded to active state","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:18.206404562Z","created_by":"tshardey","updated_at":"2026-02-08T20:54:11.966714758Z","closed_at":"2026-02-08T20:54:11.966714758Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-aqh","depends_on_id":"tome-of-secrets-40o","type":"blocks","created_at":"2026-02-02T23:09:29.82976382Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-c4t","title":"Page-count-aware reward modifiers for items","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T05:33:43.036277224Z","created_by":"tshardey","updated_at":"2026-02-23T05:33:43.036277224Z","dependencies":[{"issue_id":"tome-of-secrets-c4t","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T05:34:02.777551064Z","created_by":"tshardey"}],"comments":[{"id":5,"issue_id":"tome-of-secrets-c4t","author":"tshardey","text":"Three items currently have page-count-dependent bonuses described in their bonus text but the RewardCalculator applies them unconditionally (flat inkDrops/multiplier) regardless of actual page count:\r\n\r\n1. The Bookwyrm's Scale - \"For every book over 500 pages, gain a +10 Ink Drop bonus\" / passive +5. Currently: flat rewardModifier { inkDrops: 10 }. Should: only apply when pageCountEffective \u003e= 500.\r\n\r\n2. Tome of Potential - \"Earn a x3 Ink Drop bonus for books over 400 pages\" / passive x1.5. Currently: flat rewardModifier { inkDropsMultiplier: 3 }. Should: only apply when pageCountEffective \u003e= 400.\r\n\r\n3. Page Sprite - \"Earn a x2 Ink Drop bonus on any book under 300 pages\" / passive x1.5. Currently: flat rewardModifier { inkDropsMultiplier: 2 }. Should: only apply when pageCountEffective \u003c 300.\r\n\r\nImplementation plan:\r\n- Add structured page-count condition fields to these items in assets/data/allItems.json (e.g. pageCondition: { min: 500 } or pageCondition: { max: 299 }). Also add passivePageCondition where the passive threshold differs.\r\n- Run node scripts/generate-data.js after updating JSON.\r\n- Update RewardCalculator._getModifier() or applyModifiers() to accept the quest pageCountEffective (falling back to pageCountRaw) and skip/zero-out modifiers when the page condition is not met.\r\n- Thread quest page count through calculateFinalRewards() - the quest object is already passed in options, so read quest.pageCountEffective ?? quest.pageCountRaw there.\r\n- If pageCountEffective is null/undefined (legacy quest with no page data), the item should NOT apply its bonus (conservative: require known page count for page-gated rewards).\r\n- Update the reward receipt to note when a page-count item was skipped (e.g. \"Bookwyrm's Scale: skipped (page count unknown)\" or \"Bookwyrm's Scale: skipped (320 pages \u003c 500 threshold)\").\r\n- Consider future extensibility: a pageFormula field for items like \"+15 Ink Drops for every 100 pages over 300\" (scaling bonuses). Not required for current items but the schema should allow it.\r\n- Add tests in tests/ covering: item applied when threshold met, item skipped when not met, item skipped when page count unknown, passive vs active thresholds.\r","created_at":"2026-02-23T05:33:57Z"}]}
{"id":"tome-of-secrets-ch6","title":"Phase 1: Bug Fixes \u0026 Quick Wins","description":"Foundation bug fixes and quick improvements","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:13.368268522Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:05.199543228Z","closed_at":"2026-02-02T23:33:05.199543228Z","close_reason":"Closed"}
{"id":"tome-of-secrets-cic","title":"Filter atmospheric buff sources from quest tracker","description":"Service-level filtering to exclude modifier items","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:19.858753801Z","created_by":"tshardey","updated_at":"2026-02-16T05:40:04.515323165Z","closed_at":"2026-02-16T05:40:04.515323165Z","close_reason":"Done as part of Phase 4","dependencies":[{"issue_id":"tome-of-secrets-cic","depends_on_id":"tome-of-secrets-hdz","type":"blocks","created_at":"2026-02-02T23:09:31.238025774Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-cll","title":"Make dungeon room rewards claimable","description":"Add claim button and inventory integration for dungeon rewards","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:18.612409521Z","created_by":"tshardey","updated_at":"2026-02-08T21:00:47.208160292Z","closed_at":"2026-02-08T21:00:47.208160292Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-cll","depends_on_id":"tome-of-secrets-1n7","type":"blocks","created_at":"2026-02-02T23:09:30.221194132Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-cof","title":"Gallery: BookMetadataService - dual API integration","description":"Create assets/js/services/BookMetadataService.js with: (1) Primary: Google Books API search via https://www.googleapis.com/books/v1/volumes?q=intitle:{title}+inauthor:{author} — extract title, author, cover thumbnail, pageCount. (2) Fallback: OpenLibrary API via https://openlibrary.org/search.json?q={query} — extract covers via covers.openlibrary.org. (3) Normalize results into a common shape: { title, author, coverUrl, pageCount }. (4) Debounce-friendly: service should accept a search query string and return an array of candidate matches. (5) Handle CORS, missing data, and network errors gracefully.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T02:16:58.689092443Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:24.427689178Z","closed_at":"2026-02-23T05:28:24.427689178Z","close_reason":"BookMetadataService.js: OpenLibrary primary, Google Books backfill, parsePageCount, conditional calls to reduce 429s.","dependencies":[{"issue_id":"tome-of-secrets-cof","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T02:17:26.081551307Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-cqk","title":"Room visualization data layer (roomThemes.json, stickerSlug in atmosphericBuffs.json, generate-data)","description":"Create assets/data/roomThemes.json with cozy-modern theme, base image path, and per-sticker placement config. Add stickerSlug field to each entry in atmosphericBuffs.json. Run generate-data.js and update data.js exports for roomThemes.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T01:07:31.784551598Z","created_by":"tshardey","updated_at":"2026-02-16T03:04:39.221119211Z","closed_at":"2026-02-16T03:04:39.221119211Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-cqk","depends_on_id":"tome-of-secrets-hdz","type":"blocks","created_at":"2026-02-16T01:07:45.665457209Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-crv","title":"Implement variable tracking periods","description":"Support weekly/monthly/quarterly/yearly tracking with period calculation service","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:18.006252897Z","created_by":"tshardey","updated_at":"2026-02-08T20:54:11.801481433Z","closed_at":"2026-02-08T20:54:11.801481433Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-crv","depends_on_id":"tome-of-secrets-40o","type":"blocks","created_at":"2026-02-02T23:09:29.672165836Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-d01","title":"Room visualization integration (HTML, BuffController, character-sheet.js)","description":"Add room-visualization-container div to character-sheet.md above atmospheric buffs table. Wire BuffController.js handleAtmosphericBuffToggle() to call RoomVisualization.toggleSticker(). Initialize room viz on load with current buff state. Update character-sheet.js to pass RoomVisualization as dependency to BuffController.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T01:07:38.666734621Z","created_by":"tshardey","updated_at":"2026-02-16T03:04:39.280195406Z","closed_at":"2026-02-16T03:04:39.280195406Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-d01","depends_on_id":"tome-of-secrets-q4t","type":"blocks","created_at":"2026-02-16T01:07:47.727229584Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-dgc","title":"Add dungeon completion reminder prompt","description":"Show reminder to roll/pull from completion rewards table","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:18.814857236Z","created_by":"tshardey","updated_at":"2026-02-11T04:16:28.367482497Z","closed_at":"2026-02-11T04:16:28.367482497Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-dgc","depends_on_id":"tome-of-secrets-1n7","type":"blocks","created_at":"2026-02-02T23:09:30.378452763Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-ein","title":"Test: Restore discarded quests functionality","description":"Test that discarded quests can be restored to active","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:13:11.008353686Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.433993277Z","closed_at":"2026-02-02T23:33:00.433993277Z","close_reason":"Closed"}
{"id":"tome-of-secrets-f33","title":"Update core rules for card draw mechanics","description":"Clarify that character sheet uses card draw, not dice rolls","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:21.988454393Z","created_by":"tshardey","updated_at":"2026-02-02T23:09:21.988454393Z","dependencies":[{"issue_id":"tome-of-secrets-f33","depends_on_id":"tome-of-secrets-je3","type":"blocks","created_at":"2026-02-02T23:09:33.104123415Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-g6b","title":"Improve quest bonus filtering with tag-based exclusion","description":"Add excludeFromQuestBonuses flag to items and update filtering logic to use tag-based approach instead of hardcoded checks","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:28:30.20168361Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.389587788Z","closed_at":"2026-02-02T23:33:00.389587788Z","close_reason":"Closed"}
{"id":"tome-of-secrets-hdz","title":"Phase 4: Atmospheric Buffs Overhaul","description":"Visual and functional improvements to atmospheric buffs","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:14.474027109Z","created_by":"tshardey","updated_at":"2026-02-16T05:40:02.333938288Z","closed_at":"2026-02-16T05:40:02.333938288Z","close_reason":"Phase 4: atmosphericReward flag; quest menu filter; buff table shows item rows; item stickers in room"}
{"id":"tome-of-secrets-je3","title":"Phase 7: Documentation Updates","description":"Update core rules and documentation","status":"open","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:15.696939347Z","created_by":"tshardey","updated_at":"2026-02-02T23:09:15.696939347Z"}
{"id":"tome-of-secrets-kw4","title":"Fix Grimoire Gallery Tome Card flip interaction","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T04:44:53.423204975Z","created_by":"tshardey","updated_at":"2026-02-23T04:47:44.078079402Z","closed_at":"2026-02-23T04:47:44.078079402Z","close_reason":"Aligned Tome Card interaction with GDD: hover-to-flip on pointer devices, click-to-edit; preserved touch tap-to-flip fallback. Jest suite passing.","comments":[{"id":4,"issue_id":"tome-of-secrets-kw4","author":"tshardey","text":"GDD says Tome Cards should flip on hover (CSS rotateY) and click should open Edit Drawer. Current branch uses click-to-flip + double-click-to-edit; adjust CSS/JS so hover flips on pointer devices, click edits, and keep a touch fallback if needed.","created_at":"2026-02-23T04:45:03Z"}]}
{"id":"tome-of-secrets-m5v","title":"Phase 5: Genre System Enhancements","description":"New genres and selection flexibility","status":"closed","priority":0,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:14.873719856Z","created_by":"tshardey","updated_at":"2026-02-16T06:45:33.751316645Z","closed_at":"2026-02-16T06:45:33.751316645Z","close_reason":"Phase 5 complete: new genres added, dice limits removed, Select All added"}
{"id":"tome-of-secrets-me0","title":"Dungeon completion draw: redeem-before-apply, refund when already owned, draw button fix","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-11T04:13:39.168181356Z","created_by":"tshardey","updated_at":"2026-02-11T04:13:42.583982185Z","closed_at":"2026-02-11T04:13:42.583982185Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-me0","depends_on_id":"tome-of-secrets-cll","type":"blocks","created_at":"2026-02-11T04:13:42.195955047Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-mig","title":"Room visualization visual iteration","description":"Iterate on sticker positions/scales in roomThemes.json using the live site with CDN images. Fine-tune top/left/width percentages for each sticker slot to achieve polished composited look.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T01:07:41.446404235Z","created_by":"tshardey","updated_at":"2026-02-16T03:04:39.318147957Z","closed_at":"2026-02-16T03:04:39.318147957Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-mig","depends_on_id":"tome-of-secrets-d01","type":"blocks","created_at":"2026-02-16T01:07:49.013772334Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-n8e","title":"Gallery: Tome Card back - stat block layout","description":"Implement the back face of the Tome Card with a strict, absolute-position stat block layout. Consistent across all cards regardless of content length. Sections: (1) Header: book title (prominent), author (sub-text), completion date as Month Year (e.g., 'February 2026'). (2) Thumbnail: small faded/watermarked cover image as background or corner accent. (3) Quest Info: the quest prompt fulfilled (e.g., '♦ Read a book with a red cover'). (4) Page Count \u0026 Mechanics: base page count (from API) and effective page count (adjusted by active items), with notes on which item interactions applied. (5) Applicable Buffs: row of abbreviation/icons for active items during the read (e.g., [OE] Owl's Eyes, [SC] Scholar's Candle). (6) Rewards Received: icons + numbers for XP, Ink Drops, Paper Scraps, items. (7) Notes: stylized text box with first ~100 chars of journal entry, text-overflow truncation. All sections must use fixed positioning so layout is identical across cards.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T02:17:19.160559885Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:33.907152434Z","closed_at":"2026-02-23T05:28:33.907152434Z","close_reason":"Stat block layout on Tome Card back: header (title/author/date), prompt, page count, rewards row, buffs, notes snippet. Fixed positioning via flexbox.","dependencies":[{"issue_id":"tome-of-secrets-n8e","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T02:17:27.606515093Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-n8e","depends_on_id":"tome-of-secrets-vki","type":"blocks","created_at":"2026-02-23T02:17:37.78391666Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-pv9","title":"Dungeon completion rewards: card draw with reward images (instead of roll d20)","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-08T21:51:16.389039892Z","created_by":"tshardey","updated_at":"2026-02-08T21:54:01.551476408Z","closed_at":"2026-02-08T21:54:01.551476408Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-pv9","depends_on_id":"tome-of-secrets-1n7","type":"blocks","created_at":"2026-02-08T21:51:19.168155768Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-q4t","title":"RoomVisualization.js component + CSS styles","description":"Create assets/js/components/RoomVisualization.js as pure DOM renderer with render(containerEl, theme, activeStickers) and toggleSticker(stickerSlug, isActive) methods. Uses toCdnImageUrlIfConfigured() for image URLs. Add room visualization CSS to character-sheet.css (responsive container with aspect-ratio 16/10, sticker absolute positioning, fade transitions, border-radius).","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T01:07:36.423098771Z","created_by":"tshardey","updated_at":"2026-02-16T03:04:39.261091743Z","closed_at":"2026-02-16T03:04:39.261091743Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-q4t","depends_on_id":"tome-of-secrets-2sq","type":"blocks","created_at":"2026-02-16T01:07:47.063933892Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-q6p","title":"Add restore discarded quests functionality","description":"Allow moving quests from discarded back to active","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:17.390045Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.361141632Z","closed_at":"2026-02-02T23:33:00.361141632Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-q6p","depends_on_id":"tome-of-secrets-ch6","type":"blocks","created_at":"2026-02-02T23:09:29.111937234Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-qfm","title":"Library View: Grimoire UI for all books (Reading / Completed / DNF)","description":"Add Library view in the Grimoire (or main tab). In ui.js render all books from characterState.books grouped by status: Reading, Completed, DNF. Plan: .cursor/plans/book-exchange-plan_578ba89c.plan.md §4.","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-24T00:02:18.153296563Z","created_by":"tshardey","updated_at":"2026-02-24T00:02:18.153296563Z","dependencies":[{"issue_id":"tome-of-secrets-qfm","depends_on_id":"tome-of-secrets-14f","type":"blocks","created_at":"2026-02-24T00:02:25.226584763Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-s7l","title":"Gallery: Schema v4 migration - completed book metadata","description":"Extend completed quest objects with book metadata fields: coverUrl, pageCountRaw, pageCountEffective. Migrate monthlyCompletedBooks from a flat string array to an array of objects keyed by book title (or keep metadata on quest objects and use quest-level fields). Add schema migration v3→v4 in dataMigrator.js. New fields should be nullable/optional to support quests completed before Gallery existed. Update dataValidator.js schema version to 4.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T02:16:54.311922844Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:23.450130944Z","closed_at":"2026-02-23T05:28:23.450130944Z","close_reason":"Schema v4 migration implemented: dataValidator.js SCHEMA_VERSION=4, dataMigrator.js migrateToVersion4, Quest.js model updated.","dependencies":[{"issue_id":"tome-of-secrets-s7l","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T02:17:25.697186631Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-tj0","title":"Add quest completion dates (schema v3)","description":"Track dateAdded and dateCompleted on quests with migration","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:09:17.806496488Z","created_by":"tshardey","updated_at":"2026-02-08T20:54:11.632185131Z","closed_at":"2026-02-08T20:54:11.632185131Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-tj0","depends_on_id":"tome-of-secrets-40o","type":"blocks","created_at":"2026-02-02T23:09:29.513080312Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-ule","title":"Create national-park-poster image prompts for magical items + companions","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-16T03:16:23.734055442Z","created_by":"tshardey","updated_at":"2026-02-16T03:18:58.431468751Z","closed_at":"2026-02-16T03:18:58.431468751Z","close_reason":"Closed"}
{"id":"tome-of-secrets-vep","title":"Test: Bookshelf initialization bug fix","description":"Test that bookshelf syncs input from completedBooksSet on load","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-02T23:13:10.534775006Z","created_by":"tshardey","updated_at":"2026-02-02T23:33:00.404115587Z","closed_at":"2026-02-02T23:33:00.404115587Z","close_reason":"Closed"}
{"id":"tome-of-secrets-vki","title":"Gallery: Archive tab grid layout refactor","description":"Refactor the Archive tab from static poster/list view to a Grimoire Gallery grid of Tome Cards. (1) Update character-sheet.md Archive tab HTML structure (#completed-quests-container) to use a flexbox/grid gallery layout. (2) Update dungeonArchiveCardsViewModel.js and questArchiveCardsViewModel.js to include new metadata fields (coverUrl, pageCount, etc.) in view models. (3) Update cardRenderer.js (renderDungeonArchiveCard, renderQuestArchiveCard) to output new .tome-card HTML structure with front/back faces. (4) Front face: book cover image (or fallback). (5) Clicking a card (front or back) still opens the existing Edit Drawer. (6) Preserve edit button index mapping for drawer integration.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-23T02:17:11.662836949Z","created_by":"tshardey","updated_at":"2026-02-23T05:28:31.906906207Z","closed_at":"2026-02-23T05:28:31.906906207Z","close_reason":"Archive tab refactored: tome-cards-grid class on genre/side quest containers, renderTomeArchiveCard in ui.js, grid layout with overflow:visible for 3D.","dependencies":[{"issue_id":"tome-of-secrets-vki","depends_on_id":"tome-of-secrets-0gr","type":"blocks","created_at":"2026-02-23T02:17:27.226732503Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-vki","depends_on_id":"tome-of-secrets-s7l","type":"blocks","created_at":"2026-02-23T02:17:37.021460613Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-vki","depends_on_id":"tome-of-secrets-1vs","type":"blocks","created_at":"2026-02-23T02:17:37.400784985Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-xph","title":"Global Book Service: BookController + stateAdapter addBook/updateBook/deleteBook","description":"Create assets/js/controllers/BookController.js for CRUD on characterState.books. Add addBook(bookData), updateBook(bookId, updates), deleteBook(bookId) to stateAdapter.js. Plan: .cursor/plans/book-exchange-plan_578ba89c.plan.md §2.","status":"open","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-24T00:02:02.576327157Z","created_by":"tshardey","updated_at":"2026-02-24T00:02:02.576327157Z","dependencies":[{"issue_id":"tome-of-secrets-xph","depends_on_id":"tome-of-secrets-2xj","type":"blocks","created_at":"2026-02-24T00:02:02.586448263Z","created_by":"tshardey"},{"issue_id":"tome-of-secrets-xph","depends_on_id":"tome-of-secrets-z2i","type":"blocks","created_at":"2026-02-24T00:02:13.195233392Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-z2i","title":"Schema v5: Books \u0026 Exchange Program state, migrate quests to bookId","description":"Add BOOKS and EXCHANGE_PROGRAM to storageKeys.js and createEmptyCharacterState(). Implement migrateToVersion5() in dataMigrator.js: from each quest create a Book in characterState.books (UUID), set quest bookId, set book.links.tomeQuestId. Bump schema and validate in dataValidator.js. Plan: .cursor/plans/book-exchange-plan_578ba89c.plan.md §1.","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-24T00:02:00.227476118Z","created_by":"tshardey","updated_at":"2026-02-24T01:32:41.758364568Z","closed_at":"2026-02-24T01:32:41.758364568Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-z2i","depends_on_id":"tome-of-secrets-2xj","type":"blocks","created_at":"2026-02-24T00:02:00.237941879Z","created_by":"tshardey"}]}
{"id":"tome-of-secrets-zgq","title":"Group archived quests by month/year (most recent first)","status":"closed","priority":1,"issue_type":"task","owner":"tierra.duffield@gmail.com","created_at":"2026-02-07T19:02:27.2659169Z","created_by":"tshardey","updated_at":"2026-02-23T02:45:02.475927337Z","closed_at":"2026-02-23T02:45:02.475927337Z","close_reason":"Closed","dependencies":[{"issue_id":"tome-of-secrets-zgq","depends_on_id":"tome-of-secrets-crv","type":"blocks","created_at":"2026-02-07T19:02:30.015932851Z","created_by":"tshardey"}]}
