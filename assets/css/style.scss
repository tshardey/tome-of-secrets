---
---
/* Dark Academia Theme */

body {
    /* New Fonts and Colors */
    font-family: 'Source Serif Pro', serif;
    background-color: #2a231d; /* Deep, warm brown */
    color: #d4c8b0; /* Parchment/cream text */
    
    /* Subtle paper texture background */
    background-image: url("https://www.transparenttextures.com/patterns/old-paper.png");
    
    margin: 0;
    padding: 20px;
    line-height: 1.7; /* Slightly more spacious for readability */
}

.container {
    margin: 0 auto;
}

header {
    text-align: center;
    border-bottom: 1px solid #54483b; /* Darker brown border */
    padding-bottom: 20px;
    margin-bottom: 20px;
}

/* Use Lora for the main site title */
header h1 {
    font-family: 'Lora', serif;
    font-weight: 700;
    font-style: italic;
    font-size: 3em;
    color: #b89f62; /* Muted gold */
}

/* General heading styles */
h1, h2, h3, h4, h5, h6 {
    font-family: 'Lora', serif;
    color: #b89f62; /* Muted gold */
}

.main-content {
    display: flex;
}

.sidebar {
    width: 200px;
    flex-shrink: 0;
    margin-right: 20px;
}

.sidebar nav ul {
    list-style: none;
    padding: 0;
}

.sidebar nav a {
    text-decoration: none;
    color: #d4c8b0; /* Parchment text */
    display: block;
    padding: 8px 10px;
    border-radius: 4px;
    transition: background-color 0.2s;
    font-family: 'Lora', serif;
    font-style: italic;
}

.sidebar nav a:hover {
    background-color: #3e352f;
    color: #cca352; /* Brighter gold on hover */
}

main {
    flex-grow: 1;
}

article {
    background-color: #3e352f; /* Lighter, warm brown */
    border: 1px solid #54483b;
    padding: 25px;
    border-radius: 5px;
}

footer {
    text-align: center;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #54483b;
    color: #8a7a61; /* Muted text */
    font-style: italic;
}

a {
    color: #cca352; /* Brighter gold for links */
    text-decoration: none;
    border-bottom: 1px dotted #cca352;
}

a:hover {
    border-bottom: 1px solid #cca352;
}

/* Style for the main page title */
.page-title {
    font-size: 2.8em;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px double #54483b; /* Classic double border */
    line-height: 1.2;
}

/* Styling for the hover-to-show anchor links on headers */
article h2, article h3, article h4, article h5, article h6 {
    position: relative;
    padding-left: 1.2em; /* Add padding to the header to make room */
}

.anchor-link {
    position: absolute;
    /* Position the link in the new padding area */
    left: 0;
    top: 50%;
    transform: translateY(-50%); /* This perfectly centers the link vertically */

    /* Make the link invisible by default */
    opacity: 0;
    transition: opacity 0.2s ease-in-out;

    /* Styling for the '#' symbol */
    color: #cca352;
    text-decoration: none;
    border-bottom: none;
    font-size: 0.8em; /* Make the symbol slightly smaller than the header text */
    font-weight: normal;
}

/* ONLY when you hover over the header, make the anchor link visible */
article h2:hover .anchor-link,
article h3:hover .anchor-link,
article h4:hover .anchor-link,
article h5:hover .anchor-link,
article h6:hover .anchor-link {
    opacity: 1;
}

/* ==========================================================================
   Hero Banner for Homepage
   ========================================================================== */

.hero {
  position: relative; /* Needed for the overlay effect */
  padding: 8em 2em;
  text-align: center;
  color: #fff; /* We'll use white text on the dark image */

  /* --- The background image --- */
  background-image: url("{{ site.baseurl }}/assets/images/library-hero.png");
  background-size: cover; /* Cover the entire area */
  background-position: center 60%; /* Center the image, slightly lower */
  border-radius: 5px;
  margin-bottom: 20px;
}

/* --- Darkening overlay to make text readable --- */
.hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
  border-radius: 5px; /* Match the parent's border-radius */
  z-index: 1;
}

/* --- Style the text on top of the banner --- */
.hero-content {
  position: relative; /* Put the text on top of the overlay */
  z-index: 2;
}

.hero-title {
  font-family: 'Lora', serif;
  font-weight: 700;
  font-style: italic;
  font-size: 4em;
  color: #fff;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.7); /* Add a shadow for readability */
}

.hero-description {
  font-size: 1.2em;
  color: #d4c8b0; /* Use the parchment color for the subtitle */
  text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
}


/* ==========================================================================
   Simpler Header for other pages
   ========================================================================== */

.page-header {
  text-align: center;
  border-bottom: 1px solid #54483b;
  padding-bottom: 15px;
  margin-bottom: 20px;
}

.page-header h1 {
  font-family: 'Lora', serif;
  font-style: italic;
  font-size: 2em;
  color: #b89f62;
}

/* ==========================================================================
   Reward Item Layout
   ========================================================================== */

.reward-item {
  display: flex; /* This creates the side-by-side layout */
  align-items: center; /* This vertically aligns the image and text */
  gap: 25px; /* This creates space between the image and the text */
  margin-bottom: 40px; /* This creates space between each reward item */
  padding-bottom: 20px;
  border-bottom: 1px solid #54483b;
}

.reward-image img {
  width: 150px;  /* This controls the image size */
  height: 150px; /* This controls the image size */
  object-fit: cover; /* This prevents the image from being stretched or squished */
  border-radius: 5px;
  border: 2px solid #54483b;
}

.reward-description h4 {
  margin-top: 0;
  font-size: 1.8em;
  border-bottom: none;
  padding-bottom: 0;
  margin-bottom: 10px;
}

.reward-description p {
  margin-bottom: 0.5em;
}

/* ==========================================================================
   Custom Table Styles for Rollable Quests & Dungeons
   ========================================================================== */

article table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}

article th,
article td {
  padding: 12px 15px;
  border: 1px solid #54483b;
  text-align: left;
}

article th {
  background-color: #3e352f;
  font-family: 'Lora', serif;
  font-size: 1.2em;
}

/* --- Control Column Widths --- */
/* Target the first column of any table in the article */
article td:first-child,
article th:first-child {
  font-weight: bold;
  text-align: center;
}

/* ==========================================================================
   Nested Table Styles (for Dungeons)
   ========================================================================== */

.nested-table {
  margin-top: 15px !important; /* Add some space above the inner table */
  background-color: #2a231d; /* Match the darker site background */
  border: none;
}

.nested-table td {
  border: 1px solid #54483b;
}

/* Keep the first column narrow for the roll */
.nested-table td:first-child {
  text-align: center;
  font-weight: bold;
}

/* ==========================================================================
   Print-specific styles
   ========================================================================== */
@media print {
    body {
        background-image: none;
        background-color: #fff;
        color: #000;
    }

    .sidebar, footer, .hero, .no-print {
        display: none;
    }

    article {
        border: none;
        padding: 0;
    }

    input, textarea {
        border: 1px solid #ccc;
        padding: 5px;
        width: 100%;
    }
}

/* ==========================================================================
   Character Sheet Form Styles
   ========================================================================== */

#character-sheet input[type="text"],
#character-sheet input[type="number"],
#character-sheet select,
#character-sheet textarea {
    background-color: #2a231d; /* The darker brown from nested tables */
    color: #d4c8b0; /* Parchment text color */
    border: 1px solid #54483b; /* Darker brown border */
    border-radius: 4px;
    padding: 8px;
    font-family: 'Source Serif Pro', serif;
    font-size: 1em;
    margin-top: 5px;
}

#character-sheet textarea {
    width: 100%;
    box-sizing: border-box; /* Ensures padding doesn't add to the width */
    min-height: 120px;
    resize: vertical;
}

#character-sheet .form-list {
    list-style: none;
    padding: 0;
}

#character-sheet .form-list li {
    margin-bottom: 15px;
}

/* This will stack the label on top of the input field for a cleaner look */
#character-sheet .form-list label {
    display: block;
    margin-bottom: 5px;
}

/* This removes the max-width, allowing the inputs to span the full container */
#character-sheet .form-list input,
#character-sheet .form-list select {
    width: 100%;
    box-sizing: border-box;
}

#character-sheet .full-width-input {
    width: 100%;
    box-sizing: border-box;
}

.form-section {
    margin-bottom: 30px;
}

.form-buttons button {
    background-color: #b89f62; /* Muted gold */
    color: #2a231d; /* Deep brown text */
    border: none;
    padding: 10px 20px;
    font-family: 'Lora', serif;
    font-size: 1em;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s;
    margin-right: 10px;
}

.form-buttons button:hover {
    background-color: #cca352; /* Brighter gold on hover */
}

/* ==========================================================================
   Monthly Tracker Table and Form Styles
   ========================================================================== */

.tracker-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}

.tracker-table th,
.tracker-table td {
  padding: 12px 15px;
  border: 1px solid #54483b;
  text-align: left;
}

.tracker-table th {
  background-color: #3e352f;
  font-family: 'Lora', serif;
  font-size: 1.1em;
}

#active-assignments-container, 
#completed-quests-container,
#discarded-quests-container {
    margin-top: 30px;
}

.add-quest-form {
    border: 1px solid #54483b;
    padding: 20px;
    border-radius: 5px;
    margin-bottom: 40px;
    background-color: #3e352f;
}

.add-quest-form .form-row {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
}

.add-quest-form .form-row:last-child {
    margin-bottom: 0;
}

.add-quest-form input,
.add-quest-form select {
    flex-grow: 1; /* Allows inputs to fill the space */
    width: 33.33%; /* Default width for flex items */
}

.add-quest-form button {
    width: 100%;
    background-color: #b89f62;
    color: #2a231d;
    border: none;
    padding: 10px 20px;
    font-family: 'Lora', serif;
    font-size: 1em;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.add-quest-form button:hover {
    background-color: #cca352;
}

.delete-btn {
    background: none;
    border: none;
    color: #cca352;
    text-decoration: underline;
    cursor: pointer;
    padding: 0;
    font-size: 0.9em;
}

.action-cell button {
    display: block; /* Stack the buttons vertically */
    margin-bottom: 5px;
}

.action-cell button,
.delete-btn {
    background: none;
    border: none;
    text-decoration: underline;
    cursor: pointer;
    padding: 0;
    font-size: 0.9em;
    font-family: 'Source Serif Pro', serif;
    transition: opacity 0.2s;
}

.action-cell button:hover,
.delete-btn:hover {
    opacity: 0.8;
}

.action-cell .discard-quest-btn {
    color: #cca352; /* Orangey-gold */
}

/* ==========================================================================
   Loadout & Inventory Styles
   ========================================================================== */

.add-item-form {
    margin-bottom: 40px;
}

.add-item-form .form-row {
    display: flex;
    gap: 15px;
}

.add-item-form select {
    flex-grow: 1;
}

.add-item-form button {
    background-color: #b89f62;
    color: #2a231d;
    border: none;
    padding: 10px 20px;
    font-family: 'Lora', serif;
    font-size: 1em;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.add-item-form button:hover {
    background-color: #cca352;
}

.item-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 1.5em;
}

.item-card {
    background-color: #2a231d;
    border: 1px solid #54483b;
    border-radius: 5px;
    padding: 15px;
    display: flex;
    flex-direction: column;
}

.item-card.empty-slot {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 150px;
    color: #8a7a61;
    font-style: italic;
}

.item-card img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 4px;
    margin: 0 auto 15px auto;
    border: 2px solid #54483b;
}

.item-card .item-info {
    text-align: center;
}

.item-card h4 {
    margin: 0 0 10px 0;
    font-size: 1.4em;
    padding: 0;
}

.item-card p {
    margin: 0 0 10px 0;
    font-size: 0.95em;
    line-height: 1.5;
    color: #d4c8b0;
}

.item-card button {
    margin-top: auto; /* Pushes button to the bottom */
    margin-right: 5px;
    background: none;
    border: 1px solid #b89f62;
    color: #b89f62;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 3px;
    transition: background-color 0.2s, color 0.2s;
}

.item-card button:hover {
    background-color: #b89f62;
    color: #2a231d;
}

.item-card .delete-item-btn {
    border-color: #8a6262;
    color: #8a6262;
}
.item-card .delete-item-btn:hover {
    background-color: #8a6262;
    color: #fff;
}

.inventory-container {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px double #54483b;
}

#empty-inventory-message {
    color: #8a7a61;
    font-style: italic;
}

/* ==========================================================================
   Slot Management Styles
   ========================================================================== */
.slot-management {
    background-color: #2a231d;
    border: 1px solid #54483b;
    border-radius: 5px;
    padding: 10px 20px 15px;
    margin-bottom: 30px;
}

.slot-management h3 {
    margin-top: 10px;
    text-align: center;
}

.slot-inputs {
    display: flex;
    justify-content: space-around;
    gap: 20px;
}

.slot-inputs li {
    flex-basis: 30%;
}

.slot-inputs label {
    text-align: center;
}

/* ==========================================================================
   Abilities & Benefits Styles
   ========================================================================== */

.benefit-display {
    background-color: #2a231d;
    border: 1px solid #54483b;
    border-radius: 5px;
    padding: 15px 20px;
    margin-bottom: 25px;
}

.benefit-display h3 {
    margin-top: 0;
    margin-bottom: 10px;
}

.benefit-display p {
    color: #d4c8b0;
    font-style: italic;
    margin-bottom: 0;
}

.mastery-abilities-container {
    margin-top: 40px;
    margin-bottom: 40px;
}

.mastery-abilities-container > p {
    text-align: center;
    font-style: italic;
    margin-bottom: 20px;
}

/* Re-use item-card style for abilities */
.item-card .ability-cost {
    font-size: 0.9em;
    color: #8a7a61;
    margin-top: 10px;
}

/* ==========================================================================
   Condensed Resources Styles
   ========================================================================== */

.xp-tracker {
    display: flex;
    align-items: center;
}

.xp-tracker input {
    flex-grow: 1;
}

.xp-tracker .xp-divider {
    font-size: 1.5em;
    padding: 0 10px;
    color: #8a7a61;
}

#xp-needed {
    background-color: #2a231d; /* Darker background for read-only */
    text-align: center;
    font-weight: bold;
}

.resource-row {
    display: flex;
    justify-content: space-between;
    gap: 20px;
}

.resource-row > div {
    flex-grow: 1;
    flex-basis: 30%;
}

.resource-row > li {
    flex-grow: 1;
    flex-basis: 45%;
}

/* ==========================================================================
   Permanent Bonuses List Styles
   ========================================================================== */

#permanentBonusesList {
    list-style: none;
    padding-left: 0;
    margin-bottom: 0;
    font-style: italic;
    color: #d4c8b0;
}

#permanentBonusesList li {
    margin-bottom: 8px;
}

#permanentBonusesList li:last-child {
    margin-bottom: 0;
}

/* ==========================================================================
   Responsive Design
   ========================================================================== */

@media screen and (max-width: 768px) {
    .main-content {
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        margin-right: 0;
        margin-bottom: 20px;
    }

    article td:first-child,
    article th:first-child,
    .nested-table td:first-child {
        width: auto;
    }
}